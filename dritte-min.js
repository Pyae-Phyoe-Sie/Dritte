function addsuggest(e){$(".filter-suggest").show(),$(".filter-suggest p").remove(),0==$(".filter-suggest p").length?$(".filter-suggest").css("border","none"):$(".filter-suggest").css("border","1px solid #c1c1c1"),e.forEach(e=>$(".filter-suggest").append("<p style='margin: 0px;padding: 3px 7px;' onclick='selectSuggest(`"+e+"`)'>"+e+"</p>"))}function selectSuggest(e){$(".filter-suggest p").remove(),$(".filter-check input").val(e);let t=JSON.parse(localStorage.getItem($(".filter-key").val()));new Filter(t).action(e)}function dritte(e){return localStorage.removeItem("showIndex"),localStorage.removeItem("multiFilter"),$.each(e,function(e,t){switch(e){case"paginate":new Paginate(t).mainPaginate();break;case"filter":new Filter(t).mainFilter()}}),!0}function showClickPage(e,t){let i=JSON.parse(localStorage.getItem(t)),a=new Paginate(i);if("prev"==e?e=parseInt($("#active-page").val())-1:"next"==e&&(e=parseInt($("#active-page").val())+1),0==e)e=parseInt($("#active-page").val())+1,$("#loading").show(),$("#"+i.name).hide(),setTimeout(function(){a.showPage(e)&&parseInt($("#total-page").val())>e&&$("#"+i.name).show(),$("#loading").hide()},500);else{let t,i;1==e?(t=1,(i=3)<parseInt($("#total-page").val())&&$(".next-more").show(),$(".prev").hide(),$(".next").show()):parseInt($("#total-page").val())==e?(i=e,(t=e-2)>1&&$(".prev-more").show(),$(".prev").show(),$(".next").hide()):(i=e+2,(t=e-2)<=1?(t=1,$(".prev-more").hide()):$(".prev-more").show(),parseInt($("#total-page").val())<=i?(i=parseInt($("#total-page").val()),$(".next-more").hide()):$(".next-more").show(),$(".prev").show(),$(".next").show()),$("ul.paginate-pages>li.page").hide();for(let e=t;e<=i;e++)$("ul.paginate-pages>li.page-"+e).show();$("ul.paginate-pages>li.active").removeClass("active"),$("ul.paginate-pages>li.page-"+e).addClass("active"),a.showPage(e)}$("#active-page").val(e)}function selectFilter(e){let t=JSON.parse(localStorage.getItem(e));new Filter(t).action($("#"+e).val())}function checkforInfiniteScroll(){if($(".paginate-scroll").length>0){let t=JSON.parse(localStorage.getItem($("#scroll-property").val()));if(isElementTopInView($(".paginate-scroll"))&&"scroll"==$("#scroll-able").val()){$("#scroll-able").val("progress"),page=parseInt($("#active-page").val())+1,$("#active-page").val(page);var e=new Paginate(t);$("#loading").show(),setTimeout(function(){e.showPage(page)&&$("#scroll-able").val("scroll"),$("#loading").hide(),parseInt($("#total-page").val())==page&&($("#scroll-able").val("end"),$("#"+t.name).remove())},500)}}}function checkViewWhenScroll(){let e=JSON.parse(localStorage.getItem($(".paginate-key").val()));$(".not-view").length>0&&$(".not-view").each(function(){if("none"!=$(this).css("display")){let t;(t=0==$(this).parent(".dritte-animate-container").length?isElementTopInView($(this),0,e.hasOwnProperty("scrollWorkOn")&&"window"!=e.scrollWorkOn?e.parent:null):isElementTopInView($(this).parent(".dritte-animate-container"),0,e.hasOwnProperty("scrollWorkOn")&&"window"!=e.scrollWorkOn?e.parent:null))&&($(this).addClass("in-view"),$(this).removeClass("not-view"))}})}function isElementWholeInView(e){var t=e.offset().top,i=t+e.outerHeight(),a=$(window).scrollTop(),n=a+$(window).height();return i>a&&t<n}function isElementTopInView(e,t=null,i=null){var a=e.offset().top;return null!=t&&(a-=t),a<(null!=i?$(i).scrollTop()+$(i).height():$(window).scrollTop()+$(window).height())}$(document).ready(function(){if($(".filter-suggest").length>0){0==$(".filter-suggest p").length?$(".filter-suggest").css("border","none"):$(".filter-suggest").css("border","1px solid #c1c1c1");let e=$(".filter-text-item").offset().top+$(".filter-text-item").height()+6,t=$(".filter-text-item").width()+5,i=$(".filter-text-item").offset().left;$(".filter-suggest").css("width",t+"px"),$(".filter-suggest").css("top",e+"px"),$(".filter-suggest").css("left",i+"px")}$(window).on("scroll",function(){checkforInfiniteScroll(),checkViewWhenScroll()}),$(".filter-check-item").change(function(){let e=JSON.parse(localStorage.getItem($(".filter-key").val())),t=JSON.parse(localStorage.getItem("multiFilter")),i=$(this).val();null==t&&(t=[]),$(this).is(":checked")?t.push(i):t=$.grep(t,function(e){return e!=i}),localStorage.setItem("multiFilter",JSON.stringify(t)),new Filter(e).action()}),$(".filter-radio-item").click(function(){let e=JSON.parse(localStorage.getItem($(".filter-key").val())),t=$(this).val();new Filter(e).action(t)}),$(".filter-text-item").keypress(function(e){let t=JSON.parse(localStorage.getItem($(".filter-key").val())),i=t.child_attr,a=$(this).val()+e.key,n=[];$(t.parent+" "+t.child).each(function(){$(this).attr(i).includes(a)&&(n.includes($(this).attr(i))||n.push($(this).attr(i)))}),addsuggest(n),new Filter(t).action(a)}),$(".filter-text-item").keydown(function(e){if("Backspace"==e.key){let e=$(this).val().slice(0,-1),t=JSON.parse(localStorage.getItem($(".filter-key").val())),i=t.child_attr,a=[];""!=e&&$(t.parent+" "+t.child).each(function(){$(this).attr(i).includes(e)&&(a.includes($(this).attr(i))||a.push($(this).attr(i)))}),addsuggest(a),new Filter(t).action(e)}}),window.onclick=function(){$(".filter-suggest p").length>0&&$(".filter-suggest").hide()}});class Paginate{constructor(e){this.property=e,this.property.hasOwnProperty("per_page")||(this.property.per_page=10),localStorage.setItem(this.property.name,JSON.stringify(e))}mainPaginate(){let e=this.property;if(e.type.hasOwnProperty("animate"))if("fade-in"==e.type.animate)$("<style>.not-view.fade-in { opacity: 0; transition: opacity 1s ease; } .in-view.fade-in { opacity: 1;transition: opacity 1s ease; }</style>").appendTo("head");else if("slide-up"==e.type.animate){let t;$(e.parent+" "+e.child).each(function(){0==$(this).parent(".dritte-animate-container").length&&$(this).wrap("<div class='dritte-animate-container'></div>")}),t=e.type.hasOwnProperty("animate")?e.type.childDefaultHeight:"100px",$("<style>.dritte-animate-container { min-height: "+t+"; position: relative; } .not-view.slide-up { opacity: 0; top: 150px; position: absolute; transition: top 1s ease, opacity 1s ease, position 1s ease; } .in-view.slide-up { opacity: 1; top: 0px; position: relative; transition: top 1s ease, opacity 1s ease, position 1s ease; }</style>").appendTo("head")}else if("flip"==e.type.animate)$("<style>.not-view.flip { transform: rotateY(270deg);transition: transform 1s ease; } .in-view.flip { transform: rotateY(360deg);transition: transform 1s ease; }</style>").appendTo("head");else if("slide-left"==e.type.animate){let t;$(e.parent+" "+e.child).each(function(){0==$(this).parent(".dritte-animate-container").length&&$(this).wrap("<div class='dritte-animate-container'></div>")}),t=e.type.hasOwnProperty("animate")?e.type.childDefaultHeight:"100px",$("<style>.dritte-animate-container { min-height: "+t+"; position: relative; } .not-view.slide-left { right: 100%; position: absolute; transition: right 1s ease, position 1s ease; } .in-view.slide-left { right: 0px; position: relative; transition: right 1s ease, position 1s ease; }</style>").appendTo("head")}else if("slide-right"==e.type.animate){let t;$(e.parent+" "+e.child).each(function(){0==$(this).parent(".dritte-animate-container").length&&$(this).wrap("<div class='dritte-animate-container'></div>")}),t=e.type.hasOwnProperty("animate")?e.type.childDefaultHeight:"100px",$("<style>.dritte-animate-container { min-height: "+t+"; position: relative; } .not-view.slide-right { left: 100%; position: absolute; transition: left 1s ease, position 1s ease; } .in-view.slide-right { left: 0px; position: relative; transition: left 1s ease, position 1s ease; }</style>").appendTo("head")}else $("<style>.not-view.bounce-in { transform: scale(0); transition: transform 1s ease; } .in-view.bounce-in { transform: scale(1);transition: transform 1s ease; }</style>").appendTo("head");var t;if(null===JSON.parse(localStorage.getItem("showIndex"))){let i=[];e.type;$(this.property.parent+" "+this.property.child).each(function(){$(this).parent(".dritte-animate-container").length>0?i.push($(this).parent(".dritte-animate-container").index()):i.push($(this).index())}),localStorage.setItem("showIndex",JSON.stringify(i)),t=i.length}else{t=JSON.parse(localStorage.getItem("showIndex")).length}var i=Math.ceil(t/e.per_page);return $("#total-page").length>0&&$("#total-page").val(i),this.addItems(i),this.showPage(1),!0}addItems(e){switch(this.property.type.type){case"page":$("<style>li.active, li:hover { background-color: #3299ff !important;color: #fff !important; } li.prev, li.next { color: #fff !important; }</style>").appendTo("head");let i='<input type="hidden" id="active-page" value="1" /><input type="hidden" class="paginate-key" value="'+this.property.name+'"/><input type="hidden" id="total-page" value="'+e+'" />';i+='<ul class="paginate-pages">',e>1&&(i+='<li class="prev" onclick="showClickPage(`prev`, `'+this.property.name+'`)" style="display: none"><<</li>',i+='<li class="prev-more" style="display: none">...</li>');for(var t=1;t<=e;t++)i+='<li class="page page-'+t+'" onclick="showClickPage('+t+", `"+this.property.name+'`)">'+t+"</li>";e>1&&(i+='<li class="next-more" style="display: none">...</li>',i+='<li class="next" onclick="showClickPage(`next`, `'+this.property.name+'`)">>></li>'),i+="</ul>",0!=$(".paginate-pages").length&&($(".paginate-pages").remove(),$("#active-page").remove(),$("#total-page").remove()),$(this.property.parent).append(i),$(".paginate-pages").css({display:"flex","list-style":"none","justify-content":"center",padding:"0px"}),this.property.hasOwnProperty("listyle")&&$(".paginate-pages li").css(this.property.listyle);break;case"infinite-button":0!=$(".paginate-button").length&&$(".paginate-button").remove();let a='<div class="paginate-button"><input type="hidden" class="paginate-key" value="'+this.property.name+'"/><input type="hidden" id="active-page" value="1" /><input type="hidden" id="total-page" value="'+e+'" /><img id="loading" src="'+this.property.type.image+'" style="display: none;width:30px;"><button type="button" id="'+this.property.name+'" onclick="showClickPage(0, `'+this.property.name+'`)">More</button></div>';$(this.property.parent).append(a);break;case"infinite-scroll":0!=$(".paginate-scroll").length&&$(".paginate-scroll").remove();let n='<div class="paginate-scroll"><input type="hidden" class="paginate-key" value="'+this.property.name+'"/><input type="hidden" id="active-page" value="1" /><input type="hidden" id="total-page" value="'+e+'" /><input type="hidden" id="scroll-property" value="'+this.property.name+'" /><input type="hidden" id="scroll-able" value="scroll" /><img id="loading" src="'+this.property.type.image+'" style="display: none;width:30px;"><button type="button" id="'+this.property.name+'" style="display: none;">More</button></div>';$(this.property.parent).append(n)}}showPage(e){let t=this.property;$("li.page-"+e).addClass("active");let i=(e-1)*t.per_page+1,a=e*t.per_page,n=JSON.parse(localStorage.getItem("showIndex")),r=0;return"infinite-button"==t.type.type&&e>1||"infinite-scroll"==t.type.type&&e>1||(t.type.hasOwnProperty("animate")&&(r=1e3),$(t.child).removeClass("in-view "+t.type.animate),$(t.child).addClass("not-view "+t.type.animate),setTimeout(function(){$(t.parent+" "+t.child).parent(".dritte-animate-container").length>0?($(t.parent+" "+t.child).parent(".dritte-animate-container").hide(),$(t.parent+" "+t.child).hide()):$(t.parent+" "+t.child).hide()},r)),setTimeout(function(){for(var e=i-1;e<a;e++)e in n&&(t.type.hasOwnProperty("animate")&&$(t.parent+" "+t.child).parent(".dritte-animate-container").length>0?($(t.parent+" .dritte-animate-container:nth-child("+(n[e]+1)+")").show(),$(t.parent+" .dritte-animate-container:nth-child("+(n[e]+1)+") "+t.child).show()):$(t.parent+" "+t.child+":nth-child("+(n[e]+1)+")").show());checkViewWhenScroll()},r),!0}}class Filter{constructor(e){this.property=e,localStorage.setItem(this.property.name,JSON.stringify(e))}mainFilter(){this.addFilter()}addFilter(){var e="";if(this.property.hasOwnProperty("value"));else{let e=this.property.child_attr,t=[];$(this.property.parent+" "+this.property.child).each(function(){t.includes($(this).attr(e))||t.push($(this).attr(e))}),this.property.value=t}switch(this.property.type){case"select":e+='<option value="">default</option>',this.property.value.forEach(t=>{e+="<option value="+t+">"+t+"</option>"}),$(this.property.parent).prepend('<select id="'+this.property.name+'" onchange="selectFilter(`'+this.property.name+'`)">'+e+"</select>");break;case"check":e+='<input type="hidden" class="filter-key" value="'+this.property.name+'"/>',e+='<ul class="filter-check">',this.property.value.forEach(t=>{e+='<li><input type="checkbox" id="'+t+'" class="filter-check-item" value="'+t+'"/><label for="'+t+'">'+t+"</label></li>"}),e+="</ul>",$(this.property.parent).prepend(e);break;case"radio":e+='<input type="hidden" class="filter-key" value="'+this.property.name+'"/>',e+='<ul class="filter-check">',this.property.value.forEach(t=>{e+='<li><input type="radio" id="'+t+'" class="filter-radio-item" name="'+this.property.name+'" value="'+t+'"/><label for="'+t+'">'+t+"</label></li>"}),e+="</ul>",$(this.property.parent).prepend(e);break;case"type":e+='<input type="hidden" class="filter-key" value="'+this.property.name+'"/>',e+='<div class="filter-check"><input type="text" class="filter-text-item" />',e+='<div class="filter-suggest" style="position: absolute;z-index: 1;background-color: #fff; border: 1px solid #c1c1c1;border-radius: 5px;"></div>',e+="</div>",$(this.property.parent).prepend(e)}}action(e=null){let t=this.property.child_attr,i=this.property,a=[];if(null==e?0==(e=JSON.parse(localStorage.getItem("multiFilter"))).length?$(this.property.parent+" "+this.property.child).each(function(){i.hasOwnProperty("paginate")&&$(this).parent(".dritte-animate-container").length>0?a.push($(this).parent(".dritte-animate-container").index()):a.push($(this).index())}):$(this.property.parent+" "+this.property.child).each(function(){e.includes($(this).attr(t))&&(i.hasOwnProperty("paginate")&&$(this).parent(".dritte-animate-container").length>0?a.push($(this).parent(".dritte-animate-container").index()):a.push($(this).index()))}):""==e?$(this.property.parent+" "+this.property.child).each(function(){i.hasOwnProperty("paginate")&&$(this).parent(".dritte-animate-container").length>0?a.push($(this).parent(".dritte-animate-container").index()):a.push($(this).index())}):$(this.property.parent+" "+this.property.child).each(function(){$(this).attr(t).includes(e)&&(i.hasOwnProperty("paginate")&&$(this).parent(".dritte-animate-container").length>0?a.push($(this).parent(".dritte-animate-container").index()):a.push($(this).index()))}),localStorage.setItem("showIndex",JSON.stringify(a)),this.property.hasOwnProperty("paginate")){let e=JSON.parse(localStorage.getItem(this.property.paginate));new Paginate(e).mainPaginate()}}}