function addsuggest(e,t,i){$(i.parent+" .filter-suggest."+i.name+"-"+t).show(),$(i.parent).find(".filter-suggest."+i.name+"-"+t+" p").remove(),0==$(i.parent).find(".filter-suggest."+i.name+"-"+t+" p").length?$(i.parent).find(".filter-suggest."+i.name+"-"+t).css("border","none"):$(i.parent).find(".filter-suggest."+i.name+"-"+t).css("border","1px solid #c1c1c1"),e.forEach(e=>$(i.parent).find(".filter-suggest."+i.name+"-"+t).append("<p style='margin: 0px;padding: 3px 7px;' onclick='selectSuggest(`"+e+","+t+","+i.name+","+i.parent+"`)'>"+e+"</p>"))}function selectSuggest(e){var t=e.split(",");$(t[3]).find(".filter-suggest."+t[2]+"-"+t[1]+" p").remove(),$(t[3]).find(".filter-check input#"+t[2]+"-"+t[1]).val(t[0]);let i=JSON.parse(localStorage.getItem(t[2]));i.childFilter.forEach(function(e){e.name==t[1]&&(e.selectedFilterValue=t[0])}),localStorage.setItem(i.name,JSON.stringify(i)),new Filter(i).action()}function dritte(e){return $.each(e,function(e,t){switch(localStorage.removeItem(t.name+"-showIndex"),e){case"paginate":new Paginate(t).mainPaginate();break;case"filter":new Filter(t).mainFilter()}}),!0}function showClickPage(e,t){let i=JSON.parse(localStorage.getItem(t)),a=new Paginate(i);"prev"==e?e=parseInt($(i.parent).find("#active-page").val())-1:"next"==e&&(e=parseInt($(i.parent).find("#active-page").val())+1),0==e?(e=parseInt($(i.parent).find("#active-page").val())+1,$(i.parent).find("#loading").show(),$("#"+i.name).hide(),setTimeout(function(){a.showPage(e)&&parseInt($(i.parent).find("#total-page").val())>e&&$("#"+i.name).show(),$(i.parent).find("#loading").hide()},500)):a.showPage(e),$(i.parent).find("#active-page").val(e)}function selectFilter(e){let t=e.replace(",","-"),i=$("#"+t).val(),a=e.split(","),n=JSON.parse(localStorage.getItem(a[1]));n.childFilter.forEach(function(e){e.name==a[0]&&(e.selectedFilterValue=i)}),localStorage.setItem(n.name,JSON.stringify(n)),new Filter(n).action()}function checkforInfiniteScroll(e=null){let t=JSON.parse(localStorage.getItem(e.find("#scroll-property").val()));if($(".paginate-scroll").length>0&&parseInt($(t.parent).find("#active-page").val())<=parseInt($(t.parent).find("#total-page").val())&&isElementTopInView($(t.parent).find(".paginate-scroll"))&&"scroll"==$(t.parent).find("#scroll-able").val()){$(t.parent).find("#scroll-able").val("progress"),page=parseInt($(t.parent).find("#active-page").val())+1,$(t.parent).find("#active-page").val(page);var i=new Paginate(t);$(t.parent).find("#loading").show(),setTimeout(function(){i.showPage(page)&&$(t.parent).find("#scroll-able").val("scroll"),$(t.parent).find("#loading").hide(),parseInt($(t.parent).find("#total-page").val())==page&&($(t.parent).find("#scroll-able").val("end"),$("#"+t.name).remove())},500)}}function checkViewWhenScroll(){let e=JSON.parse(localStorage.getItem($(".paginate-key").val()));$(".not-view").length>0&&$(".not-view").each(function(){if("none"!=$(this).css("display")){let t;(t=0==$(this).parent(".dritte-animate-container").length?isElementTopInView($(this),0,e.hasOwnProperty("scrollWorkOn")&&"window"!=e.scrollWorkOn?e.parent:null):isElementTopInView($(this).parent(".dritte-animate-container"),0,e.hasOwnProperty("scrollWorkOn")&&"window"!=e.scrollWorkOn?e.parent:null))&&($(this).addClass("in-view"),$(this).removeClass("not-view"))}})}function isElementWholeInView(e){var t=e.offset().top,i=t+e.outerHeight(),a=$(window).scrollTop(),n=a+$(window).height();return i>a&&t<n}function isElementTopInView(e,t=null,i=null){var a=e.offset().top;return null!=t&&(a-=t),a<(null!=i?$(i).scrollTop()+$(i).height():$(window).scrollTop()+$(window).height())}function deleteText(e){let t=e.replace(",","-"),i=e.split(","),a=JSON.parse(localStorage.getItem(i[0]));a.childFilter.forEach(function(e){e.name==i[1]&&(e.selectedFilterValue="")}),localStorage.setItem(a.name,JSON.stringify(a)),new Filter(a).action(),$("#"+t).val("")}$(document).ready(function(){if($(".filter-suggest").length>0){0==$(".filter-suggest p").length?$(".filter-suggest").css("border","none"):$(".filter-suggest").css("border","1px solid #c1c1c1");let e=$(".filter-text-item").offset().top+$(".filter-text-item").height()+6,t=$(".filter-text-item").width()+5,i=$(".filter-text-item").offset().left;$(".filter-suggest").css("width",t+"px"),$(".filter-suggest").css("top",e+"px"),$(".filter-suggest").css("left",i+"px")}$(window).on("scroll",function(){checkforInfiniteScroll(),checkViewWhenScroll()}),$(".filter-check-item").change(function(){let e=[],t=$(this).val(),i=$(this).is(":checked"),a=t.split(","),n=JSON.parse(localStorage.getItem(a[2]));n.childFilter.forEach(function(t,r){t.name==a[1]&&(t.hasOwnProperty("selectedFilterValue")?e=t.selectedFilterValue:t.selectedFilterValue=[],i?e.push(a[0]):e=$.grep(e,function(e){return e!=a[0]}),n.childFilter[r].selectedFilterValue=e)}),localStorage.setItem(n.name,JSON.stringify(n)),new Filter(n).action()}),$(".filter-radio-item").click(function(){let e=$(this).val().split(","),t=JSON.parse(localStorage.getItem(e[2]));t.childFilter.forEach(function(t){t.name==e[1]&&(t.selectedFilterValue=e[0])}),localStorage.setItem(t.name,JSON.stringify(t)),new Filter(t).action()}),$(".filter-text-item").keypress(function(e){let t,i=$(this).attr("id"),a=$("."+i).val(),n=JSON.parse(localStorage.getItem(a)),r=$(this).val()+e.key;n.childFilter.forEach(function(e){i=i.replace(n.name+"-",""),e.name==i&&(e.selectedFilterValue=r,t=e.child_attr)}),localStorage.setItem(n.name,JSON.stringify(n));let l=[];$(n.parent+" "+n.child).each(function(){$(this).attr(t).includes(r)&&(l.includes($(this).attr(t))||l.push($(this).attr(t)))}),addsuggest(l,i,n),new Filter(n).action()}),$(".filter-text-item").keydown(function(e){"Backspace"==e.key&&e.preventDefault()}),window.onclick=function(){$(".filter-suggest p").length>0&&$(".filter-suggest").hide()}});class Paginate{constructor(e){this.property=e,this.property.hasOwnProperty("per_page")||(this.property.per_page=10),localStorage.setItem(this.property.name,JSON.stringify(e))}mainPaginate(){let e,t,i=this.property;if(i.type.hasOwnProperty("animate"))if("fade-in"==i.type.animate);else if("slide-up"==i.type.animate){let e;$(i.parent+" "+i.child).each(function(){0==$(this).parent(".dritte-animate-container").length&&$(this).wrap("<div class='dritte-animate-container'></div>")}),e=i.type.hasOwnProperty("animate")?i.type.childDefaultHeight:"100px",$(".dritte-animate-container").css("min-height",e),$(".dritte-animate-container").css("position","relative")}else if("y-flip"==i.type.animate);else if("x-flip"==i.type.animate);else if("slide-left"==i.type.animate){let e;$(i.parent+" "+i.child).each(function(){0==$(this).parent(".dritte-animate-container").length&&$(this).wrap("<div class='dritte-animate-container'></div>")}),e=i.type.hasOwnProperty("animate")?i.type.childDefaultHeight:"100px",$(".dritte-animate-container").css("min-height",e),$(".dritte-animate-container").css("position","relative")}else if("slide-right"==i.type.animate){let e;$(i.parent+" "+i.child).each(function(){0==$(this).parent(".dritte-animate-container").length&&$(this).wrap("<div class='dritte-animate-container'></div>")}),e=i.type.hasOwnProperty("animate")?i.type.childDefaultHeight:"100px",$(".dritte-animate-container").css("min-height",e),$(".dritte-animate-container").css("position","relative")}else"bounce-in";if(null===(t=i.hasOwnProperty("showIndex")?JSON.parse(localStorage.getItem(i.showIndex)):JSON.parse(localStorage.getItem(this.property.name+"-showIndex")))){let t=[];i.type;$(this.property.parent+" "+this.property.child).each(function(){$(this).parent(".dritte-animate-container").length>0?t.push($(this).parent(".dritte-animate-container").index()):t.push($(this).index())}),localStorage.setItem(this.property.name+"-showIndex",JSON.stringify(t)),e=t.length}else e=t.length;let a=Math.ceil(e/i.per_page);return $("#total-page").length>0&&$("#total-page").val(a),this.addItems(a),this.showPage(1),!0}addItems(e){switch(this.property.type.type){case"page":let t='<div class="paginate-pages-container"><input type="hidden" id="active-page" value="1" /><input type="hidden" class="paginate-key" value="'+this.property.name+'"/><input type="hidden" id="total-page" value="'+e+'" />';t+='<ul class="paginate-pages">',e>1&&(t+='<li class="prev" onclick="showClickPage(`prev`, `'+this.property.name+'`)" style="display: none"><<</li>',t+='<p class="prev-more" style="display: none">...</p>');for(let i=1;i<=e;i++)t+='<li class="page page-'+i+'" onclick="showClickPage('+i+", `"+this.property.name+'`)">'+i+"</li>";e>1&&(t+='<p class="next-more" style="display: none">...</p>',t+='<li class="next" onclick="showClickPage(`next`, `'+this.property.name+'`)">>></li>'),t+="</ul></div>",0!=$(this.property.parent+" .paginate-pages-container").length&&($(this.property.parent+" .paginate-pages-container").remove(),$("#active-page").remove(),$("#total-page").remove()),$(this.property.parent).append(t),$(this.property.parent+" .paginate-pages").css({display:"flex","list-style":"none","justify-content":"center",padding:"0px"});break;case"infinite-button":0!=$(this.property.parent+" .paginate-button").length&&$(this.property.parent+" .paginate-button").remove();let i='<div class="paginate-button" style="text-align: center;"><input type="hidden" class="paginate-key" value="'+this.property.name+'"/><input type="hidden" id="active-page" value="1" /><input type="hidden" id="total-page" value="'+e+'" /><img id="loading" src="'+this.property.type.image+'" style="display: none;width:30px;"><button type="button" id="'+this.property.name+'" onclick="showClickPage(0, `'+this.property.name+'`)">More</button></div>';$(this.property.parent).append(i);break;case"infinite-scroll":0!=$(this.property.parent+" .paginate-scroll").length&&$(this.property.parent+" .paginate-scroll").remove();let a='<div class="paginate-scroll" style="text-align: center;"><input type="hidden" class="paginate-key" value="'+this.property.name+'"/><input type="hidden" id="active-page" value="1" /><input type="hidden" id="total-page" value="'+e+'" /><input type="hidden" id="scroll-property" value="'+this.property.name+'" /><input type="hidden" id="scroll-able" value="scroll" /><img id="loading" src="'+this.property.type.image+'" style="display: none;width:30px;"><button type="button" id="'+this.property.name+'" style="display: none;">More</button></div>';$(this.property.parent).append(a)}}showPage(e){let t,i,a=this.property;$(a.parent).find("li.page-"+e).addClass("active"),1==e?(t=1,(i=3)<parseInt($(a.parent).find("#total-page").val())&&$(a.parent).find(".next-more").show(),$(a.parent).find(".prev").hide(),$(a.parent).find(".next").show()):parseInt($(a.parent).find("#total-page").val())==e?(i=e,(t=e-2)>1&&$(a.parent).find(".prev-more").show(),$(a.parent).find(".prev").show(),$(a.parent).find(".next").hide()):(i=e+2,(t=e-2)<=1?(t=1,$(a.parent).find(".prev-more").hide()):$(a.parent).find(".prev-more").show(),parseInt($(a.parent).find("#total-page").val())<=i?(i=parseInt($(a.parent).find("#total-page").val()),$(a.parent).find(".next-more").hide()):$(a.parent).find(".next-more").show(),$(a.parent).find(".prev").show(),$(a.parent).find(".next").show()),$(a.parent).find("ul.paginate-pages>li.page").hide();for(let e=t;e<=i;e++)$(a.parent).find("ul.paginate-pages>li.page-"+e).show();$(a.parent).find("ul.paginate-pages>li.active").removeClass("active"),$(a.parent).find("ul.paginate-pages>li.page-"+e).addClass("active");let n,r=(e-1)*a.per_page+1,l=e*a.per_page;n=a.hasOwnProperty("showIndex")?JSON.parse(localStorage.getItem(a.showIndex)):JSON.parse(localStorage.getItem(a.name+"-showIndex"));let p=0;return a.hasOwnProperty("total")&&a.total&&$(a.parent+" .dritte-filter-container").length>0&&(0==$(a.parent+" .total-count").length?$(a.parent+" .dritte-filter-container").after('<div class="total-count">Found : '+n.length+"</div>"):$(a.parent+" .total-count").text("Found : "+n.length)),"infinite-button"==a.type.type&&e>1||"infinite-scroll"==a.type.type&&e>1||(a.type.hasOwnProperty("animate")&&(p=1e3),$(a.child).removeClass("in-view "+a.type.animate),$(a.child).addClass("not-view "+a.type.animate),setTimeout(function(){$(a.parent+" "+a.child).parent(".dritte-animate-container").length>0?($(a.parent+" "+a.child).parent(".dritte-animate-container").addClass("dritte-hide"),$(a.parent+" "+a.child).addClass("dritte-hide")):$(a.parent+" "+a.child).addClass("dritte-hide")},p)),setTimeout(function(){for(let e=r-1;e<l;e++)e in n&&(a.type.hasOwnProperty("animate")&&$(a.parent+" "+a.child).parent(".dritte-animate-container").length>0?($(a.parent+" .dritte-animate-container:nth-child("+(n[e]+1)+")").removeClass("dritte-hide"),$(a.parent+" .dritte-animate-container:nth-child("+(n[e]+1)+") "+a.child).removeClass("dritte-hide")):$(a.parent+" "+a.child+":nth-child("+(n[e]+1)+")").removeClass("dritte-hide"));checkViewWhenScroll()},p),!0}}class Filter{constructor(e){this.property=e,localStorage.setItem(this.property.name,JSON.stringify(this.property))}mainFilter(){localStorage.removeItem(this.property.name+"-showIndex");this.checkFilterType()}checkFilterType(){let e=this;this.property.hasOwnProperty("childFilter")?this.property.childFilter.forEach(function(t){e.addFilter(t)}):e.addFilter(this.property)}addFilter(e){let t=this.property,i="";if(e.hasOwnProperty("value"));else{let t=e.child_attr,i=[];$(this.property.parent+" "+this.property.child).each(function(){i.includes($(this).attr(t))||i.push($(this).attr(t))}),e.value=i}switch(0==$(this.property.parent+" .dritte-filter-container").length&&$(this.property.parent).prepend("<div class='dritte-filter-container'></div>"),e.type){case"select":i+='<option value="">default</option>',e.value.forEach(e=>{i+="<option value="+e+">"+e+"</option>"}),$(this.property.parent+" .dritte-filter-container").append('<select id="'+e.name+"-"+this.property.name+'" onchange="selectFilter(`'+e.name+","+this.property.name+'`)">'+i+"</select>");break;case"check":i+='<ul class="filter-check">',e.value.forEach(a=>{i+='<li><input type="checkbox" id="'+this.property.name+"-"+e.name+"-"+a+'" class="filter-check-item" value="'+a+","+e.name+","+t.name+'"/><label for="'+this.property.name+"-"+e.name+"-"+a+'">'+a+"</label></li>"}),i+="</ul>",$(this.property.parent+" .dritte-filter-container").append(i);break;case"radio":i+='<ul class="filter-check">',e.value.forEach(a=>{i+='<li><input type="radio" id="'+this.property.name+"-"+e.name+"-"+a+'" class="filter-radio-item" name="'+this.property.name+'" value="'+a+","+e.name+","+t.name+'"/><label for="'+this.property.name+"-"+e.name+"-"+a+'">'+a+"</label></li>"}),i+="</ul>",$(this.property.parent+" .dritte-filter-container").append(i);break;case"type":i+='<div class="filter-check" style="position: relative;"><div><input type="text" class="filter-text-item" id="'+this.property.name+"-"+e.name+'" required />',i+='<span style="margin-left: -20px;cursor: pointer;" class="remove-text" onClick="deleteText(`'+this.property.name+","+e.name+'`)">&#10005;</span></div>',i+='<input type="hidden" class="'+this.property.name+"-"+e.name+'" value="'+t.name+'"/>',i+='<div class="filter-suggest '+this.property.name+"-"+e.name+'" style="position: absolute;z-index: 1;background-color: #fff; border: 1px solid #c1c1c1;border-radius: 5px;"></div>',i+="</div>",$(this.property.parent+" .dritte-filter-container").append(i)}}action(){let e=this.property,t=[];e.childFilter.forEach(function(i){if(i.hasOwnProperty("selectedFilterValue")){let a=i.selectedFilterValue;0==a.length||""==a?0==t.length&&$(e.parent+" "+e.child).each(function(){$(this).parent(".dritte-animate-container").length>0?t.push($(this).parent(".dritte-animate-container")):t.push($(this))}):0==t.length?$(e.parent+" "+e.child).each(function(){"type"==i.type||"select"==i.type?""!=a?$(this).attr(i.child_attr).includes(a)&&($(this).parent(".dritte-animate-container").length>0?t.push($(this).parent(".dritte-animate-container")):t.push($(this))):$(this).parent(".dritte-animate-container").length>0?t.push($(this).parent(".dritte-animate-container")):t.push($(this)):"radio"==i.type?a.includes($(this).attr(i.child_attr))&&($(this).parent(".dritte-animate-container").length>0?t.push($(this).parent(".dritte-animate-container")):t.push($(this))):"check"==i.type&&a.includes($(this).attr(i.child_attr))&&($(this).parent(".dritte-animate-container").length>0?t.push($(this).parent(".dritte-animate-container")):t.push($(this)))}):t=jQuery.grep(t,function(t){if("type"==i.type||"select"==i.type){if(""==a)return t;if(t.hasClass("dritte-animate-container")){if(t.children(e.child).attr(i.child_attr).includes(a))return t}else if(t.attr(i.child_attr).includes(a))return t}else if("radio"==i.type||"check"==i.type)if(t.hasClass("dritte-animate-container")){if(a.includes(t.children(e.child).attr(i.child_attr)))return t}else if(a.includes(t.attr(i.child_attr)))return t})}});let i=[];if(t.forEach(function(e){i.push(e.index())}),0==i.length?0==$(".no-data").length&&$(this.property.parent).append('<p class="no-data">No Record Found!</p>'):$(this.property.parent+" .no-data").remove(),localStorage.setItem(this.property.name+"-showIndex",JSON.stringify(i)),this.property.hasOwnProperty("paginate")){let e=JSON.parse(localStorage.getItem(this.property.paginate));e.parent=this.property.parent,e.child=this.property.child,e.showIndex=this.property.name+"-showIndex",new Paginate(e).mainPaginate()}}}
